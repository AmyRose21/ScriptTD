local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService")
local Debris = game:GetService("Debris")
local LocalPlayer = Players.LocalPlayer

-- Lista exacta de mensajes vÃ¡lidos
local dashMessages = {
    ["ğŸ‘âœŒğŸ’§â˜ŸğŸ“‚"] = true,
    ["ğŸ‘âœŒğŸ’§â˜ŸğŸ“„"] = true,
    ["ğŸ‘âœŒğŸ’§â˜ŸğŸ—"] = true,
}

local hoverMessages = {
    ["ğŸ’§â˜ŸâœŒğŸ‘âšğŸ•ˆğŸ“‚"] = true,
    ["ğŸ’§â˜ŸâœŒğŸ‘âšğŸ•ˆğŸ“„"] = true,
    ["ğŸ’§â˜ŸâœŒğŸ‘âšğŸ•ˆğŸ—"] = true,
}

local stopHoverMessages = {
    ["â˜âœ‹â˜ âœ‹ğŸ’§â˜ŸğŸ“‚"] = true,
    ["â˜âœ‹â˜ âœ‹ğŸ’§â˜ŸğŸ“„"] = true,
    ["â˜âœ‹â˜ âœ‹ğŸ’§â˜ŸğŸ—"] = true,
}

-- FunciÃ³n que se ejecuta cada vez que se recibe un mensaje por el chat moderno.
local function onMessageReceived(messageObject)
    local text = messageObject.Text
    local fromUserId = messageObject.TextSource and messageObject.TextSource.UserId

    -- Verificamos que el remitente sea un jugador vÃ¡lido y que no sea nosotros mismos.
    if fromUserId and fromUserId ~= LocalPlayer.UserId then
        local senderPlayer = Players:GetPlayerByUserId(fromUserId)
        if senderPlayer and senderPlayer.Character and senderPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = senderPlayer.Character.HumanoidRootPart

            -- Si el mensaje coincide exactamente con alguno de los mensajes definidos:
            if dashMessages[text] then
                local dashSound = Instance.new("Sound")
                dashSound.SoundId = "rbxassetid://18400344659"
                dashSound.Volume = 2
                dashSound.Parent = hrp
                dashSound:Play()
                Debris:AddItem(dashSound, 5)

            elseif hoverMessages[text] then
                local hoverSound = Instance.new("Sound")
                hoverSound.SoundId = "rbxassetid://18400344659"
                hoverSound.Volume = 2
                hoverSound.Parent = hrp
                hoverSound:Play()
                Debris:AddItem(hoverSound, 5)

            elseif stopHoverMessages[text] then
                if hoverTrack then -- AsegÃºrate de verificar si existe antes de detenerlo.
                    hoverTrack:Stop()
                end

            elseif text == "uso habilidad A" then
                -- AquÃ­ puedes agregar tu lÃ³gica adicional para "uso habilidad A"
            end

        end
    end
end

-- Nos suscribimos al evento OnIncomingMessage para detectar los mensajes entrantes.
TextChatService.OnIncomingMessage = onMessageReceived
